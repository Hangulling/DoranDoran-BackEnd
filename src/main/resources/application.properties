# ===================================
# Server Configuration
# ===================================
server.port=8080
server.servlet.context-path=/
spring.application.name=dorandoran

# ===================================
# Database Configuration (PostgreSQL)
# ===================================
spring.datasource.url=jdbc:postgresql://localhost:5432/dorandoran
spring.datasource.username=dorandoran_user
spring.datasource.password=dorandoran_pass123!
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.default_batch_fetch_size=100
spring.jpa.open-in-view=false

# Hibernate JSON Type Support
spring.jpa.properties.hibernate.types.json.type.class=com.vladmihalcea.hibernate.type.json.JsonBinaryType

# ===================================
# Redis Configuration
# ===================================
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# Redis Cache TTL (messages cache)
cache.redis.messages.ttl=10800  # 3?? (? ??)
cache.redis.chatroom.ttl=3600   # 1?? (? ??)

# ===================================
# OpenAI Configuration
# ===================================
openai.api.key=${OPENAI_API_KEY}
openai.api.url=https://api.openai.com/v1
openai.model=gpt-4-turbo-preview
openai.max-tokens=2000
openai.temperature=0.7
openai.timeout=30s

# ===================================
# JWT Configuration
# ===================================
jwt.secret=${JWT_SECRET:dorandoran-secret-key-2025-minimum-32-characters-required}
jwt.access-token-validity=3600     # 1?? (?)
jwt.refresh-token-validity=604800  # 7? (?)

# ===================================
# Security Configuration
# ===================================
security.rate-limit.enabled=true
security.rate-limit.login-attempts=5
security.rate-limit.login-window=60  # ? ??
security.rate-limit.message-qps=20
security.account-lock-duration=30    # ? ??

# ===================================
# Logging Configuration
# ===================================
logging.level.root=INFO
logging.level.com.dorandoran=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.file.name=logs/dorandoran.log

# ===================================
# Actuator & Monitoring
# ===================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true

# ===================================
# SSE Configuration
# ===================================
spring.mvc.async.request-timeout=30000  # 30?
server.servlet.session.timeout=30m

# ===================================
# File Upload
# ===================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ===================================
# Internationalization (i18n)
# ===================================
spring.messages.basename=messages
spring.messages.encoding=UTF-8
spring.messages.fallback-to-system-locale=false
spring.messages.default-locale=ko_KR

# ===================================
# Jackson Configuration
# ===================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Seoul
spring.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss'Z'
spring.jackson.default-property-inclusion=non_null

# ===================================
# Environment Profiles
# ===================================
spring.profiles.active=local

# ===================================
# Custom Properties
# ===================================
# ?? ??? ??
chat.fixed-rooms.enabled=true
chat.fixed-rooms.categories=LOVER,SENIOR,COLLEAGUE,CLIENT

# ??? ??
chat.intimacy.min-level=1
chat.intimacy.middle-level=2
chat.intimacy.max-level=3
chat.intimacy.default-level=1

# ??? ??
message.pagination.default-size=20
message.pagination.max-size=100
message.history.max-days=30

# ??? ??
store.max-items-per-user=1000